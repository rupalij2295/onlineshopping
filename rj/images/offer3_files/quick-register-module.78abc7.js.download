(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{aCs1:function(e,t,i){"use strict";i.r(t);i("yXV3"),i("Rfxz"),i("ma9I"),i("fbCW"),i("yq1k"),i("sMBO"),i("07d7"),i("5s+n"),i("ls82");var o=i("XKCe"),r={ga:{register:function(e,t){var i=e?"Success":"Fail_",r="";t&&(r=e?"":t),ga(GB_ANALYSIS_GA_SEND,{hitType:"event",eventAction:"ClickPopUpsRegister",eventCategory:"注册弹窗",eventLabel:i+r,eventValue:e,transport:"beacon"}),o.a.triggerNotice({daId:"2-7-3",extraData:{scenes:"快速弹窗",register_method:"email",is_success:!!e,fail_reason:e?"":i+t}})},autoPopUps:function(){GBGaSend({category:"注册弹窗",action:"AutoPopUps"}),o.a.triggerNotice({daId:"2-7-1",extraData:{scenes:"快速弹窗",autoPopUps:!0}})},clickPopUps:function(){GBGaSend({category:"注册弹窗",action:"ClickPopUps"}),o.a.triggerNotice({daId:"2-7-1",extraData:{scenes:"快速弹窗",autoPopUps:!1}})},closePopUps:function(){GBGaSend({category:"注册弹窗",action:"CloseAutoPopUps"}),o.a.triggerNotice({daId:"2-7-4",extraData:{scenes:"快速弹窗"}})},editEmail:function(){GBGaSend({category:"注册弹窗",action:"EditEmail"})},boolPrivacy:function(){GBGaSend({category:"注册弹窗",action:"ClickPopUpsRegister",label:"Fail_Please agree to our Privacy Policy",value:0})}}};function n(e,t,i,o,r,n,s){try{var c=e[n](s),a=c.value}catch(e){return void i(e)}c.done?t(a):Promise.resolve(a).then(o,r)}var s=gbCommonInfo,c=s.lang,a=s.SITE_GDPR,u=s.WEB_CLIENT,l={name:"quick-register-vue",props:{showQuick:!1,quickShow:!1,absoluteShowQuick:!0},data:function(){return{language:{},lang:c,SITE_GDPR:a,WEB_CLIENT:u,firstCouponSite:{},emailtxt:"",errorTxt:"",state:{quickShowReg:!1,quickShowSuc:!1,errorTip:!1,quickloading:!1},first_pop_uped:"",isKeepPrivacy:!1,privacyError:!1,pattern:/^(?=.{5,100}$)^[a-zA-Z0-9]+([-_.]?([a-zA-Z0-9])+)*@([a-zA-Z0-9]+([_.-]?[a-zA-Z0-9]+)*\.)([a-zA-Z]{2,6}|[0-9]{1,3}){1}$/,gb_s_qr_enable:!0,defoutStyle:{backgroundColor:""},changeoutStyle:{backgroundColor:""},insideNohover:{backgroundColor:"",borderColor:"",color:""},theme:{},privacy_policy:0}},created:function(){this.init()},mounted:function(){this.first_pop_uped=SHEIN_W.getCookie("have_show"),1!=this.first_pop_uped?this.$emit("show-openreg"):window._GB_PopUpModalEventCenter_.done("quickRegister"),1==SHEIN_W.getCookie("keepPrivacy")?this.isKeepPrivacy=!1:(this.isKeepPrivacy=!0,["uk","fr","de","es","it","en","nl"].includes(c)&&$(".j-quick-register").find(".inside-btm").addClass("add-privacy"))},methods:{handleTAndCProtocol:function(){location.href="/Terms-and-Conditions-a-399.html"},init:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var i,o,r,n,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:i=e.sent,o=i.language,r=i.firstCouponSite,n=i.theme,t.language=o,t.firstCouponSite=r,n&&n.data&&n.data[0]?t.setTheme(n.data[0]):r&&(t.defoutStyle={backgroundColor:r.registerImgConf&&r.registerImgConf.left_colour_on},t.changeoutStyle={backgroundColor:r.registerImgConf&&r.registerImgConf.left_colour_off},t.insideNohover={backgroundColor:r.registerImgConf&&r.registerImgConf.button_colour,borderColor:r.registerImgConf&&r.registerImgConf.button_colour,color:r.registerImgConf&&r.registerImgConf.button_copy_colour},s="",r.registerImgConf&&(r.registerImgConf.register_img&&(s+="\n                    .c-quick-register .quickg-inside {\n                        background: url(".concat(transformImg(r.registerImgConf.register_img),") no-repeat!important;\n                    }\n                    ")),r.registerImgConf.register_success_img&&(s+="\n                    .c-quick-register .quickg-inside.quickg-inside-suc {\n                        background: url(".concat(transformImg(r.registerImgConf.register_success_img),") no-repeat!important;\n                    }\n                    ")),r.registerImgConf.input_copy_colour&&(s+="\n                    .c-quick-register .quickg-inside .inside-input .c-input input::-webkit-input-placeholder {\n                        color: ".concat(r.registerImgConf.input_copy_colour,"!important;\n                    }\n                    .c-quick-register .quickg-inside .inside-input .c-input input:-moz-placeholder {\n                        color: ").concat(r.registerImgConf.input_copy_colour,"!important;\n                    }\n                    .c-quick-register .quickg-inside .inside-input .c-input input::-moz-placeholder {\n                        color: ").concat(r.registerImgConf.input_copy_colour,"!important;\n                    }\n                    .c-quick-register .quickg-inside .inside-input .c-input input:-ms-input-placeholder {\n                        color: ").concat(r.registerImgConf.input_copy_colour,"!important;\n                    }\n                    .c-quick-register .quickg-inside .inside-input .c-input input {\n                    -webkit-text-fill-color: ").concat(r.registerImgConf.input_copy_colour,"!important;\n                    }\n                    "))),(c=document.createElement("style")).setAttribute("type","text/css"),c.innerHTML=s,document.body.appendChild(c));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(o,r){var s=e.apply(t,i);function c(e){n(s,o,r,c,a,"next",e)}function a(e){n(s,o,r,c,a,"throw",e)}c(void 0)}))})()},setTheme:function(e){e&&e.content&&e.content[0]&&e.content[0].content&&e.content[0].content.props&&e.content[0].content.props.items&&e.content[0].content.props.items[0]&&(this.theme=e.content[0].content.props.items[0])},fetchData:function(){return new Promise((function(e,t){$.get("/getQuickRegisterData",(function(t){e(t)}))}))},openQuickReg:function(){this.$emit("show-innereg")},showArgeeClause:function(){1==SHEIN_W.getCookie("keepPrivacy")&&$.post("/user/showAgreeClause",{},(function(e){}))},quickRegBtn:function(){var e=this;gbCommonInfo.ftoken?this.submitQuickReg():(this.state.quickloading=!0,initFtokenCb.push((function(){e.state.quickloading=!1,e.submitQuickReg()})))},submitQuickReg:function(){var e=this,t=this.language;if(!e.gb_s_qr_enable)return!1;var i,o=e.emailtxt;e.errorTxt="",sa("send",{activity_name:"click_quick_register",activity_param:{activity_from:"quick"}}),i=e.SITE_GDPR.indexOf(e.lang)>=0?1:0,this.privacy_policy=i,e.$nextTick((function(){if(0==o.length)return e.privacyError=!1,e.errorTxt=t.lang_header_getoff_error_p2,r.ga.register(0,"Please fill in the mailbox"),e.biQuickRegisterResult(i,"failure","empty_email"),!1;if(!e.pattern.test(o))return e.privacyError=!1,e.errorTxt=t.lang_login_enter_invalid,r.ga.register(0,"Mailbox validation failure"),e.biQuickRegisterResult(i,"failure","incorrect_email_format"),!1;var n=[];"undefined"!=typeof firstCouponSite&&firstCouponSite&&firstCouponSite.registerImgConf&&firstCouponSite.registerImgConf.is_show_perfer&&$(".quick-reg-refer-input input:checkbox:checked").each((function(e,t){n.push(parseInt(t.name))}));var s=gbCommonInfo.isUserMediumSite,c={email:o,prefer:n,is_whole_compare:s?1:0};e.gb_s_qr_enable=!1,e.state.quickloading=!0,this.requestQuickRegister(c)}))},requestQuickRegister:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this,n=this.language,s=this.privacy_policy;window.GTInstance&&window.GTInstance.getItemResult("JyRiskReg")&&!i?window.GTInstance.verify((function(i){var r=i.challenge,n=i.status,s=i.risk;if(r)return e.challenge=r,e.gtRisk=s,void t.requestQuickRegister(e,!0);o.gb_s_qr_enable=!0,o.state.quickloading=!1,"error"===n&&(o.errorTxt=SHEIN_W.htmlDecode(She_Login_labels.SHEIN_PC_KEY_4111))}),"quickRegister"):$.ajax({type:"POST",url:"/user/auth/quickRegister",contentType:"application/json",headers:{"x-ftoken":gbCommonInfo.ftoken},data:JSON.stringify(e),success:function(t){if(o.gb_s_qr_enable=!0,o.sensorsBindUserId(t),0==t.code?(o.showArgeeClause(),r.ga.register(1)):r.ga.register(0,t.msg),0==t.code)return o.state.quickShowReg=!0,o.state.quickShowSuc=!0,window.welcomePrivacyVue&&window.welcomePrivacyVue.welcomehide(),SHEIN_W.setCookie("have_show",1,86400),void 0!==SHEIN_W.userModule&&SHEIN_W.userModule.update_top_login&&SHEIN_W.userModule.update_top_login(),$(".j-privacy-check-quickregister").length&&$(".j-privacy-check-quickregister").is(":visible")&&"undefined"!=typeof GB_GDPR_ANALYSIS&&GB_GDPR_ANALYSIS.GDPRregister("Subscribe-register","AgreePrivacyPolicy"),o.biQuickRegisterResult(s,"success",""),void(window.welcomePrivacyVue&&window.welcomePrivacyVue.welcomehide());if(window.GTInstance&&window.GTInstance.isShouldInit&&window.GTInstance.reset(),-403!==t.code){if(-404===t.code)o.errorTxt=She_Login_labels.login_fail;else if(400503==t.code)o.privacyError=!1,o.errorTxt=n.lang_header_getoff_error_p4,o.biQuickRegisterResult(s,"failure","registered_email");else if(400517==t.code)o.privacyError=!1,o.errorTxt=n.lang_ip_overflow,o.biQuickRegisterResult(s,"failure","IP_limit_error");else if(400522==t.code)o.privacyError=!1,o.errorTxt=n.lang_cod_verify5,o.biQuickRegisterResult(s,"failure","other");else if(100102==t.code)o.privacyError=!1,o.errorTxt=n.lang_login_enter_invalid,o.biQuickRegisterResult(s,"failure","Mailbox validation failure");else if(400542==t.code)o.privacyError=!1,o.biQuickRegisterResult(s,"failure","registered_email"),o.errorTxt=n.SHEIN_PC_KEY_4234;else{var i={402901:She_Login_labels.SHEIN_PC_KEY_4111,402902:She_Login_labels.lang_cod_verify5,402903:She_Login_labels.SHEIN_PC_KEY_4112}[""+t.code]||n.lang_member_wallet_failed;o.errorTxt=i}o.state.quickloading=!1}else window.GTInstance.reInitGt((function(){return o.requestQuickRegister(e)}))},error:function(){o.biQuickRegisterResult(s,"failure","network_error")}})},transformImg:transformImg,editInputEmail:function(){r.ga.editEmail()},blurTips:function(){this.emailtxt.length&&!this.pattern.test(this.emailtxt)?this.errorTxt=this.language.lang_login_enter_invalid:this.errorTxt=""},biQuickRegisterResult:function(e,t,i){sa("send",{activity_name:"click_quick_register_result",activity_param:{privacy_policy:e,status:t,failure_reason:i,activity_from:"quick"}},{beacon:1})},thirdPrivacyShow:function(e){"A"==e.target.tagName.toUpperCase()&&window.quickRegister&&window.quickRegister.privacyShow()},sensorsBindUserId:function(e){e&&0==e.code&&e.info&&e.info.member&&e.info.member.member_id&&window.sensors&&window.sensors.login(e.info.member.member_id)}}},g=i("KHd+"),p=Object(g.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showQuick&&e.absoluteShowQuick,expression:"showQuick && absoluteShowQuick"}],staticClass:"c-quick-register j-quick-register",class:{"c-quick-register-hide":!e.quickShow}},[i("input",{staticStyle:{width:"0",height:"0",border:"0",position:"absolute",opacity:"0"},attrs:{type:"text",placeholder:"勿删"}}),e._v(" "),i("div",{staticClass:"quickg-outside",style:[e.theme.descBackgroundColor?{backgroundColor:e.theme.descBackgroundColor||"#222"}:e.quickShow?e.defoutStyle:e.changeoutStyle],on:{click:e.openQuickReg}},[i("i",{staticClass:"iconfont icon-arrow-left"}),e._v(" "),e.theme.descText?i("div",{staticClass:"outside-txt",style:[e.theme.descTextColor&&{color:e.theme.descTextColor}]},[e._v(e._s(e.theme.descText))]):e.firstCouponSite.registerImgConf?i("div",{staticClass:"outside-txt"},[e._v(e._s(e.firstCouponSite.registerImgConf.left_copy))]):e._e()]),e._v(" "),i("div",{staticClass:"quickg-inside",class:{"quickg-inside-suc":e.state.quickShowReg&&!e.theme.registerImgSrc},style:[e.theme.registerImgSrc?{background:"url("+e.transformImg(e.theme.registerImgSrc)+") no-repeat",backgroundSize:"cover"}:{}]},[e.theme.registerSuccessImgSrc||e.firstCouponSite.registerImgConf&&e.firstCouponSite.registerImgConf.register_success_img?[i("img",{directives:[{name:"show",rawName:"v-show",value:e.state.quickShowSuc,expression:"state.quickShowSuc"}],staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:e.transformImg(e.theme.registerSuccessImgSrc||e.firstCouponSite.registerImgConf.register_success_img)}})]:e._e(),e._v(" "),e.state.quickShowReg?e._e():i("div",{staticClass:"inside-ing"},[i("div",{staticClass:"inside-btm"},[i("div",{staticClass:"inside-input she-clearfix"},[i("div",{staticClass:"email-input"},[i("div",{staticClass:"c-input"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.emailtxt,expression:"emailtxt",modifiers:{trim:!0}}],staticClass:"input-error",style:[e.theme.inputTextColor&&{color:e.theme.inputTextColor,backgroundColor:"#fff"}],attrs:{placeholder:e.theme.inputText||e.firstCouponSite.registerImgConf&&e.firstCouponSite.registerImgConf.input_copy,type:"email",name:"email",autocomplete:"off"},domProps:{value:e.emailtxt},on:{click:e.editInputEmail,blur:[e.blurTips,function(t){e.$forceUpdate()}],input:function(t){t.target.composing||(e.emailtxt=t.target.value.trim())}}}),e._v(" "),e.SITE_GDPR.includes(e.lang)?[i("div",{staticClass:"c-privacy-check j-common-privacy-con j-privacy-check-quickregister"},[i("div",{staticClass:"privacy-item",class:{"ccc-config":e.theme.policyTextColor},style:{color:e.theme.policyTextColor||"#666"}},[i("div",{domProps:{innerHTML:e._s(e.language.lang_privacy_third_tip)},on:{click:e.thirdPrivacyShow}})])])]:e._e(),e._v(" "),["es"].includes(e.lang)&&"shein"===e.WEB_CLIENT?i("div",{staticClass:"i-t-protocol",style:{color:e.theme.policyTextColor||"#999"}},[e._v("\n                                "+e._s(e.language.SHEIN_PC_KEY_4932)+" \n                                "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:e.handleTAndCProtocol}},[e._v(e._s(e.language.SHEIN_PC_KEY_3840))])]):e._e(),e._v(" "),i("div",{staticClass:"input-error-txt",domProps:{innerHTML:e._s(e.errorTxt)}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.privacyError,expression:"privacyError"}],staticClass:"input-error-txt j-quickregister-privacy-tip",domProps:{innerHTML:e._s(e.language.lang_privacy_error)}})],2)]),e._v(" "),i("div",{staticClass:"email-btn"},[i("button",{staticClass:"she-btn-purple-no-hover",style:{backgroundColor:e.theme.buttonBackgroundColor||e.insideNohover.backgroundColor,color:e.theme.buttonTextColor||e.insideNohover.color,borderColor:e.theme.buttonTextColor?"":e.insideNohover.borderColor},on:{click:e.quickRegBtn}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.state.quickloading,expression:"!state.quickloading"}]},[e._v(e._s(e.theme.buttonText||e.firstCouponSite.registerImgConf&&e.firstCouponSite.registerImgConf.button_copy))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.state.quickloading,expression:"state.quickloading"}],staticClass:"la-ball-pulse la-ball-pulse-white"},[i("div"),e._v(" "),i("div"),e._v(" "),i("div")])])])])])])],2)])}),[],!1,null,null,null).exports;$("body").append('<div class="j-quick-register-container"></div>'),window.quickRegister=new Vue({components:{"quick-register-vue":p},template:'<quick-register-vue \n        :show-quick="state.quickRegister" \n        :quick-show="state.quickShow"\n        :absolute-show-quick="state.absoluteShowQuick"\n        @show-openreg="quickInnerShow"\n        @show-innereg="quickInnerOpenshow"\n        >\n    </quick-register-vue>',el:".j-quick-register-container",data:{state:{quickRegister:!1,quickShow:!1,absoluteShowQuick:!0}},methods:{absoluteHide:function(){this.state.absoluteShowQuick=!1,this.state.quickRegister=!1,this.state.quickShow=!1,window._GB_PopUpModalEventCenter_.next("quickRegister")},rawHide:function(e){e&&(this.state.absoluteShowQuick=!0),this.state.quickRegister=!1,this.state.quickShow=!1,window._GB_PopUpModalEventCenter_.next("quickRegister")},quickInnerShow:function(){var e=this;window._GB_PopUpModalEventCenter_.pushQueue("quickRegister",(function(){if(SHEIN_W.getCookie("userinfo_email"))return window._GB_PopUpModalEventCenter_.next("quickRegister");sa("send",{activity_name:"expose_quick_register"}),r.ga.autoPopUps(!0),e.state.quickShow=!0,e.state.quickRegister=!0}))},quickInnerOpenshow:function(){this.state.quickShow=!this.state.quickShow,SHEIN_W.setCookie("have_show",1,86400);var e=SHEIN_W.getCookie("hide_q_r");null==$(".j-header-username").text()&&1!=e&&window.location.href.indexOf("user/auth/login")<0&&(this.state.quickRegister=!0),this.state.quickShow&&(r.ga.clickPopUps(),sa("send",{activity_name:"expose_quick_register"})),this.state.quickShow||(r.ga.closePopUps(),window._GB_PopUpModalEventCenter_.next("quickRegister"))},privacyShow:function(){welcomePrivacyVue.showContent="fromQuickRegister","undefined"!=typeof GB_GDPR_ANALYSIS&&GB_GDPR_ANALYSIS.GDPRregister("ClickPrivacyPolicy","快速注册")}}}),$((function(){var e=SHEIN_W.getCookie("hide_q_r"),t=SHEIN_W.getCookie("userinfo_email"),i=!1;try{(i=window.configActData.content.layout_data.some((function(e){return"ITEM_REGISTER"===e.style.type})))&&!SHEIN_W.getCookie("have_show")&&SHEIN_W.setCookie("have_show",1,86400)}catch(e){}!t&&1!=e&&window.location.href.indexOf("user/auth/login")<0&&!i&&(quickRegister.state.quickRegister=!0),$(".j-quick-register").length&&$("body").click((function(e){$(".j-welcome-privacy").length&&$.contains($(".j-welcome-privacy")[0],e.target)||$(".j-popup-us").length&&$.contains($(".j-popup-us")[0],e.target)||$(".j-us-privacy-pop").length&&$.contains($(".j-us-privacy-pop")[0],e.target)||$(".geetest_panel").length&&$.contains($(".geetest_panel")[0],e.target)||$.contains($(".j-quick-register")[0],e.target)||(SHEIN_W.getCookie("have_show")||SHEIN_W.setCookie("have_show",1,86400),quickRegister.state.quickShow=!1,window._GB_PopUpModalEventCenter_.next("quickRegister"))}))}))}}]);
//# sourceMappingURL=quick-register-module.78abc7.js.map